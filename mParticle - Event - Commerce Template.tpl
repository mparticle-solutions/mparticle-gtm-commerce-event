___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "mParticle - Event - Commerce Template",
  "catagories": [
    "MARKETING", 
    "ANALYTICS", 
    "PERSONALIZATION"
  ],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "This mParticle GTM Template allows you to configure and track commerce events via the mParticle web SDK. Must have the mParticle SDK initialized before this tag will work.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "SELECT",
    "name": "commerceEventCategory",
    "displayName": "Commerce Event Category",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "product",
        "displayValue": "Product Action Event"
      },
      {
        "value": "impression",
        "displayValue": "Product Impression Event"
      },
      {
        "value": "promotion",
        "displayValue": "Promotion Event"
      }
    ],
    "simpleValueType": true,
    "help": "Please select what type of eCommerce event you are intending to send."
  },
  {
    "type": "SELECT",
    "name": "productAction",
    "displayName": "Product Action Type",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": 1,
        "displayValue": "AddToCart"
      },
      {
        "value": 2,
        "displayValue": "RemoveFromCart"
      },
      {
        "value": 3,
        "displayValue": "Checkout"
      },
      {
        "value": 4,
        "displayValue": "CheckoutOption"
      },
      {
        "value": 5,
        "displayValue": "Click"
      },
      {
        "value": 6,
        "displayValue": "ViewDetail"
      },
      {
        "value": 7,
        "displayValue": "Purchase"
      },
      {
        "value": 8,
        "displayValue": "Refund"
      },
      {
        "value": 9,
        "displayValue": "AddToWishlist"
      },
      {
        "value": 10,
        "displayValue": "RemoveFromWishlist"
      },
      {
        "value": 0,
        "displayValue": "Unknown"
      }
    ],
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "commerceEventCategory",
        "paramValue": "product",
        "type": "EQUALS"
      }
    ],
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "help": "The Commerce API allows you to highly customize your Commerce flow. Please select the appropriate product action."
  },
  {
    "type": "GROUP",
    "name": "product",
    "displayName": "Product Information",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "TEXT",
        "name": "productName",
        "displayName": "Name",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "productSku",
        "displayName": "SKU",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "productPrice",
        "displayName": "Price",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "productQuantity",
        "displayName": "Quantity",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NUMBER"
          },
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "productVariant",
        "displayName": "Variant",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "productCategory",
        "displayName": "Category",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "productBrand",
        "displayName": "Brand",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "productPosition",
        "displayName": "Position",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "productCouponCode",
        "displayName": "Coupon Code",
        "simpleValueType": true
      },
      {
        "type": "SIMPLE_TABLE",
        "name": "productAttributes",
        "displayName": "Custom Product Attributes",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "Key",
            "name": "key",
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "help": "Optional custom attributes for products can be defined as key/value pairs within an object."
      }
    ],
    "enablingConditions": [
      {
        "paramName": "commerceEventCategory",
        "paramValue": "product",
        "type": "EQUALS"
      },
      {
        "paramName": "commerceEventCategory",
        "paramValue": "impression",
        "type": "EQUALS"
      }
    ],
    "help": "Product information must include the product name, SKU, quantity, and price."
  },
  {
    "type": "SIMPLE_TABLE",
    "name": "customAttributes",
    "displayName": "Custom Event Attributes",
    "simpleTableColumns": [
      {
        "defaultValue": "",
        "displayName": "Key",
        "name": "key",
        "type": "TEXT"
      },
      {
        "defaultValue": "",
        "displayName": "Value",
        "name": "value",
        "type": "TEXT"
      }
    ],
    "help": "Optional custom attributes for a product action can be defined as key/value pairs witin an object. The object will be populated from this table.",
    "enablingConditions": [
      {
        "paramName": "commerceEventCategory",
        "paramValue": "product",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "SIMPLE_TABLE",
    "name": "customFlags",
    "displayName": "Custom Event Flags",
    "simpleTableColumns": [
      {
        "defaultValue": "",
        "displayName": "Key",
        "name": "key",
        "type": "TEXT"
      },
      {
        "defaultValue": "",
        "displayName": "Value",
        "name": "value",
        "type": "TEXT"
      }
    ],
    "help": "Optional custom flags can be defined as key/value pairs within an object. The object will be populated from this table.",
    "enablingConditions": [
      {
        "paramName": "commerceEventCategory",
        "paramValue": "product",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "transactionAttributes",
    "displayName": "Transaction Attributes",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "TEXT",
        "name": "transactionID",
        "displayName": "Transaction ID",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "transactionRevenue",
        "displayName": "Revenue",
        "simpleValueType": true,
        "valueValidators": []
      },
      {
        "type": "TEXT",
        "name": "transactionShipping",
        "displayName": "Shipping",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "transactionTax",
        "displayName": "Tax",
        "simpleValueType": true
      }
    ],
    "enablingConditions": [
      {
        "paramName": "productAction",
        "paramValue": 7,
        "type": "EQUALS"
      },
      {
        "paramName": "productAction",
        "paramValue": 8,
        "type": "EQUALS"
      },
      {
        "paramName": "productAction",
        "paramValue": 3,
        "type": "EQUALS"
      }
    ],
    "help": "Note: Product purchases, refunds, and checkout events require a transaction attributes object to provide fuller detail of the event."
  },
  {
    "type": "GROUP",
    "name": "promotion",
    "displayName": "Promotion",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "TEXT",
        "name": "promotionId",
        "displayName": "Promotion ID",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "promotionName",
        "displayName": "Promotion Name",
        "simpleValueType": true
      },
      {
        "type": "TEXT",
        "name": "promotionCreative",
        "displayName": "Promotion Creative",
        "simpleValueType": true
      }
    ],
    "enablingConditions": [
      {
        "paramName": "commerceEventCategory",
        "paramValue": "promotion",
        "type": "EQUALS"
      }
    ],
    "help": "“Promotion” events are used to represent internal offers - such as discounts - that might be displayed in a banner advertisement. Promotion events are created by specifying a promotion action string, and one or more promotions."
  },
  {
    "type": "TEXT",
    "name": "impressionLocation",
    "displayName": "Impression Location",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "commerceEventCategory",
        "paramValue": "impression",
        "type": "EQUALS"
      }
    ],
    "help": "“Impression” events are used to represent any time one or more products are displayed on the screen. The Impression Location where the product was viewed.",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
const log = require('logToConsole');
const callInWindow = require('callInWindow'); 
const copyFromWindow = require('copyFromWindow'); 
const copyFromDataLayer = require('copyFromDataLayer'); 
log("eComm template start"); 

//--- helper functions ---

//iterates over table data and adds the key and values to the object
const populateAttributes = function(rows){
  let obj = {};
  if (rows) {
    rows.forEach((row)=> {
      obj[row.key] = row.value; 
    });
  }
  return obj;            
};

//grab product information from data and create an mParticle product
const generateProducts = function(){
  let products = [];
  if (data.DLProducts) {
    let DLproducts = copyFromDataLayer('eCommerce.products'); 
    DLproducts.forEach((product) => {
      
    }); 
  } else {
  let customProductAttributes = populateAttributes(data.productAttributes);
    
  products.push(callInWindow(
      'mParticle.eCommerce.createProduct', 
      data.productName, 
      data.productSku, 
      data.productPrice, 
      data.productQuantity, 
      data.productVariant, 
      data.productCategory, 
      data.productBrand, 
      data.productPosition, 
      data.productCouponCode, 
      customProductAttributes
   ));
 }
    
  return products;
  
};

//--- ecommerce events---

//sets currency code if available
if (data.currencyCode) {
    callInWindow('mParticle.eCommerce.setCurrencyCode', data.currencyCode);
}

//product events
if (data.commerceEventCategory == 'product') {
  let productAction = data.productAction; 
  let customAttributes = populateAttributes(data.customAttributes);
  let customFlags = populateAttributes(data.customFlags); 
  let products = generateProducts(); 
  let transactionAttributes = {
    Id: data.transactionId,
    Revenue: data.transactionRevenue,
    Tax: data.transactionTax,
    Shipping: data.transactionShipping,
  }; 
  
  //log product action on mParticle
  
     log(
       "action data = ",
       products
     ); 

    callInWindow(
      'mParticle.eCommerce.logProductAction', 
      productAction, 
      products,
      customAttributes, 
      customFlags, 
      transactionAttributes
    );

//promotion events
} else if (data.commerceEventCategory == 'promotion'){
  
    var promotion = callInWindow(
      "mParticle.eCommerce.createPromotion",
      data.promotionId,
      data.promotionCreative, 
      data.promotionName 
    ); 
  
    var promotionType = copyFromWindow(
      "mParticle.PromotionType.PromotionClick"
    );
  
     callInWindow(
      "mParticle.eCommerce.logPromotion",
      promotionType, 
      promotion
    );
  
//impression events
} else if (data.commerceEventCategory == 'impression'){
  let product = generateProducts()[0]; 
  
  var impression = callInWindow(
    "mParticle.eCommerce.createImpression", 
    data.impressionLocation, 
    product
  );
  
  log("action data =",   "mParticle.eCommerce.logImpression",
    impression); 
  
  callInWindow(
    "mParticle.eCommerce.logImpression",
    impression
    );
}

log("eComm template end"); 

// Call data.gtmOnSuccess when the tag is finished.
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "mParticle.eCommerce.setCurrencyCode"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "mParticle.eCommerce.createProduct"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "mParticle.eCommerce.logProductAction"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "mParticle.ready"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "mParticle.eCommerce.createPromotion"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "mParticle.eCommerce.logPromotion"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "mParticle.PromotionType.PromotionClick"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "mParticle.eCommerce.logImpression"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "mParticle.eCommerce.createImpression"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_data_layer",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: mParticle createProduct called with correct values
  code: "const log = require('logToConsole');\nconst mockData = {\n    commerceEventCategory:\
    \ \"product\",\n    productName: \"productName\",\n    productSku: \"sku123\"\
    ,\n    productPrice: \"12.21\",\n    productQuantity: 1,\n    productAction: \"\
    mParticle.ProductActionType.Purchase\",\n    transactionId: \"1234\",\n    transactionRevenue:\
    \ \"12.34\",\n};\n\nmock('callInWindow', function () {\n    if (arguments[0] ==\
    \ \"mParticle.eCommerce.createProduct\") {\n        return {\n            Name:\
    \ \"productName\",\n            Sku: \"sku123\",\n            Price: 12.21,\n\
    \            Quantity: 1,\n            TotalAmount: 12.21,\n            Attributes:\
    \ {},\n        };\n    }\n}); \n\n// Call runCode to run the template's code.\n\
    runCode(mockData);\n\n// Verify that the tag finished successfully.\nlet testData\
    \ = {\n    commerceEventCategory: \"product\",\n    productName: \"productName\"\
    ,\n    productSku: \"sku123\",\n    productPrice: \"12.21\",\n    productQuantity:\
    \ 1,\n    productAction: \"mParticle.ProductActionType.Purchase\",\n    transactionId:\
    \ \"1234\",\n    transactionRevenue: \"12.34\",\n    customProductAttributes:\
    \ {},\n};\n\n\nassertApi('callInWindow').wasCalledWith('mParticle.eCommerce.createProduct',\
    \ testData.productName, testData.productSku, testData.productPrice, testData.productQuantity,\
    \ testData.productVariant, testData.productCategory, testData.productBrand, testData.productPosition,\
    \ testData.productCouponCode, testData.customProductAttributes);"
- name: mParticle logProductAction called with correct values
  code: "const log = require('logToConsole');\nconst mockData = {\n    commerceEventCategory:\
    \ \"product\",\n    productName: \"productName\",\n    productSku: \"sku123\"\
    ,\n    productPrice: 12.21,\n    productQuantity: 1,\n    productAction: 7,\n\
    \    transactionId: \"1234\",\n    transactionRevenue: \"12.34\",\n};\n\nmock('callInWindow',\
    \ function () {\n    if (arguments[0] == \"mParticle.eCommerce.createProduct\"\
    ) {\n        log(\"in createProduct\"); \n        return {\n            Name:\
    \ \"productName\",\n            Sku: \"sku123\",\n            Price: 12.21,\n\
    \            Quantity: 1,\n            Attributes: {},\n        };\n    } else\
    \ if (arguments[0] == \"mParticle.ready\") {\n      return arguments[1]; \n  \
    \  }\n});\n\nlet testData = {\n    commerceEventCategory: \"product\",\n    productName:\
    \ \"productName\",\n    productSku: \"sku123\",\n    productPrice: 12.21,\n  \
    \  productQuantity: 1,\n    productAction: 7,\n    transactionId: \"1234\",\n\
    \    transactionRevenue: \"12.34\",\n    transactionAttributes: {\n      Id: \"\
    1234\",\n      Revenue: \"12.34\", \n      Tax: undefined,\n      Shipping: undefined,\n\
    \    },\n    product: {\n       Name: \"productName\",\n       Sku: \"sku123\"\
    ,\n       Price: 12.21,\n       Quantity: 1,\n       Attributes: {},\n    }\n\
    };\n\n\n// Call runCode to run the template's code.\nrunCode(mockData);\n\n//\
    \ Verify that the tag finished successfully.\nassertApi('callInWindow').wasCalledWith('mParticle.eCommerce.logProductAction',\
    \ testData.productAction, [testData.product], {}, {}, testData.transactionAttributes);"
- name: mParticle logImpression called with correct values
  code: "const log = require('logToConsole');\nconst mockData = {\n    commerceEventCategory:\
    \ \"impression\",\n    productName: \"productName\",\n    productSku: \"sku123\"\
    ,\n    productPrice: 12.21,\n    productQuantity: 1,\n    impressionLocation:\
    \ \"this is the impression location\"\n};\n\nmock('callInWindow', function ()\
    \ {\n    let product = {\n            Name: \"productName\",\n            Sku:\
    \ \"sku123\",\n            Price: 12.21,\n            Quantity: 1,\n         \
    \   Attributes: {},\n        };\n  \n    let impression = {\n      Product: product,\
    \ \n      Name: \"this is the impression location\"\n    }; \n  \n    if (arguments[0]\
    \ == \"mParticle.eCommerce.createProduct\") {\n        return product; \n    }\
    \ else if (arguments[0] == \"mParticle.eCommerce.createImpression\") {\n     \
    \ return impression; \n    }\n});\n\nlet testData = {\n    impression: {\n   \
    \   Product: {\n        Name: \"productName\",\n        Sku: \"sku123\",\n   \
    \     Price: 12.21,\n        Quantity: 1,\n        Attributes: {}\n        },\n\
    \      Name: \"this is the impression location\"\n    }\n};\n\n\n// Call runCode\
    \ to run the template's code.\nrunCode(mockData);\n\nlog(\"test data = \", 'mParticle.eCommerce.logImpression',\
    \ testData.impression); \n\n// Verify that the tag finished successfully.\nassertApi('callInWindow').wasCalledWith('mParticle.eCommerce.logImpression',\
    \ testData.impression);"
- name: mParticle logPromotion called with correct values
  code: "const log = require('logToConsole');\nconst mockData = {\n  commerceEventCategory:\
    \ \"promotion\",\n  promotionId: \"id123\", \n  poromotionCreative: \"creative123\"\
    , \n  promotionName: \"promo Name\"\n};\n  \nmock(\"copyFromWindow\", function()\
    \ {\n      return 2;\n});\n  \n\nmock('callInWindow', function () {\n    let promotion\
    \ = {\n      Id: \"id123\", \n      Creative: \"creative123\", \n      Name: \"\
    promo Name\"\n    };\n  \n    if (arguments[0] == \"mParticle.eCommerce.createPromotion\"\
    ) {\n        return promotion; \n    } \n});\n\nlet testData = {\n    promotion:\
    \ {\n      Id: \"id123\", \n      Creative: \"creative123\", \n      Name: \"\
    promo Name\"\n    }, \n  promotionType: 2\n};\n\n\n// Call runCode to run the\
    \ template's code.\nrunCode(mockData);\n\nlog(\"test data = \", \"mParticle.eCommerce.logPromotion\"\
    ,\n      testData.promotionType, \n      testData.promotion); \n\n// Verify that\
    \ the tag finished successfully.\nassertApi('callInWindow').wasCalledWith(\"mParticle.eCommerce.logPromotion\"\
    , testData.promotionType, testData.promotion);"
- name: mParticle setCurrencyCode called with value if provided
  code: "const mockData = {\n  currencyCode: \"USD\" \n};\n\n// Call runCode to run\
    \ the template's code.\nrunCode(mockData);\n\n// Verify that the tag finished\
    \ successfully.\nassertApi('callInWindow').wasCalledWith(\"mParticle.eCommerce.setCurrencyCode\"\
    , \"USD\");"


___NOTES___

Created on 8/7/2023, 3:53:01 PM


